{% extends "base.html.twig" %}

{% block title 'Gérer Produit' %}

{% block body %}

	{% include 'flashes.html.twig' %}

	{# Recherche #}
	<!-- Content Row -->
	<div class="row">

		<!-- Area Chart -->
		<div class="col-xl-12 col-lg-12">
			<div class="card shadow mb-4">

				<!-- Card Header -->
				<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
					<h6 class="m-0 font-weight-bold text-primary">Recherche</h6>
				</div>

				<!-- Card Body - search options -->
				<div class="card-body">

					{{ form_start(form) }}
					<div class="form-row">
						<div class="col-lg-6">
							{{form_row(form.frenchName)}}
						</div>
						<div class="col-lg-6">
							{{form_row(form.casNumber)}}
						</div>
						<div class="col-lg-4">
							{{ form_row(form.family, {'label':'Famille'}) }}
						</div>
						<div class="col-lg-4">
							{{ form_row(form.storage, {'label':'Stockage'})}}
						</div>
						<div class="col-lg-4">
							{{ form_row(form.trashCan, {'label':'Poubelle'}) }}

						</div>
					</div>
					{{ form_widget(form) }}
					<button type="submit" class="btn-primary btn">Rechercher</button>
					{{ form_end(form) }}

				</div>

			</div>
		</div>

	</div>

	{# Table #}
	<!-- Content Row -->
	<div class="row">

		<!-- Area Chart -->
		<div class="col-xl-12 col-lg-12">
			<div class="card shadow mb-4">

				<!-- Card Header -->
				<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
					<h6 class="m-0 font-weight-bold text-primary">Liste</h6>
				</div>

				<!-- Card Body - search options -->
				<div class="card-body">

					<table class="table table-striped">
						<thead>
						<tr>
							<th>Titre</th>
							<th>Action</th>
						</tr>
						</thead>
						<tbody>
						{% for product in products %}
							<tr>
								<td>{{ product.frenchName }}</td>
								<td>
									<a href="{{ path('productmanager.product.edit', {id: product.id}) }}" class="btn btn-secondary">Editer</a>
									<form method="post" action="{{ path('productmanager.product.delete', {id: product.id}) }}" style="display: inline-block">
										<input type="hidden" name="_method" value="DELETE">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.id) }}">
										<button class="btn btn-danger">Supprimer</button>
									</form>
								</td>
							</tr>

						{% endfor %}
						</tbody>
					</table>

					{# display navigation #}
					<div class="navigation">
						{{ knp_pagination_render(products) }}
					</div>

				</div>

			</div>

			<div class="text-right">
				<div>
					<a href="{{ path('productmanager.product.new') }}" class="btn btn-primary">Créer un nouveau produit</a>
				</div>
			</div>

			<div class="text-right">
				<div class="mt-2">
					<a href="{{ path('productmanager.family') }}" class="btn btn-outline-primary">Ajouter une nouvelle famille</a>
				</div>
			</div>

		</div>

	</div>

{% endblock %}
